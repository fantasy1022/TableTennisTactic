name: Android CI  

on:  
  push:  
    branches:  
      - main  
  pull_request:  
    branches:  
      - main  

jobs:  
  build:  

    runs-on: ubuntu-latest  

    env:  
      JAVA_HOME: /opt/java/openjdk-17  
      ANDROID_SDK_ROOT: ${{ github.workspace }}/android-sdk  

    steps:  
    - name: Checkout repository  
      uses: actions/checkout@v3  

    - name: Set up JDK 17  
      uses: actions/setup-java@v3  
      with:  
        distribution: 'temurin' # 可以根據需要選擇適當的分發版，例如 temurin、adopt、zulu 等  
        java-version: '17'  

    - name: Download Android SDK  
      uses: android-actions/setup-android@v2  
      with:  
        api-level: 33  
        target: default  
        arch: x64  
        cache: true  

    - name: Grant execute permission for Gradle wrapper  
      run: chmod +x ./gradlew  

    - name: Build Debug APK  
      run: ./gradlew assembleDebug  

    - name: Upload Debug APK  
      uses: actions/upload-artifact@v3  
      with:  
        name: debug-apk  
        path: app/build/outputs/apk/debug/app-debug.apk  
